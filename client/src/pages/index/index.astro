---
import { getAllCampaigns, getAllEntries, getAllTypes } from "@lib/api.ts";
import Layout from "@lib/layouts/Layout.astro";
import EntryList from "@lib/components/EntryList.astro";
import FilterList from "@lib/components/FilterList.astro";
import FilterReset from "@lib/components/FilterReset.svelte";

const entries = await getAllEntries();
const campaigns = await getAllCampaigns();
const types = await getAllTypes();
---

<script is:inline async src="https://platform.twitter.com/widgets.js"></script>
<Layout>
  <main>
    <aside>
      <h2>Filters</h2>
      <FilterReset client:load />
      <details open>
        <summary>view filters</summary>
        <FilterList />
      </details>
    </aside>
    <section>
      <EntryList entries={entries} campaigns={campaigns} types={types} />
    </section>
  </main>
</Layout>

<style>
  @media (width >= 48rem) {
    main {
      display: grid;
      grid-template-columns: 2fr 1fr;
    }

    section {
      grid-column: 1;
      grid-row: 1;
    }

    aside {
      grid-column: 2;
      grid-row: 1;

      border-left: 1px solid var(--black);
      padding-left: 1rem;
    }

    details {
      margin-top: 0.5rem;
    }
  }
</style>
